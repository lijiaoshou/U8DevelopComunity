
@{
    Layout = null;
}

<!DOCTYPE html>
<html>

<head>
    <title>
        U8开发-注册
    </title>
    @*<link href="http://fonts.googleapis.com/css?family=Lato:100,300,400,700" media="all" rel="stylesheet" type="text/css" />*@
    <link href="~/Content/thirdpart/bootstrap.min.css" media="all" rel="stylesheet" type="text/css" />
    <link href="~/Content/thirdpart/font-awesome.css" media="all" rel="stylesheet" type="text/css" />
    <link href="~/Content/thirdpart/se7en-font.css" media="all" rel="stylesheet" type="text/css" />
    <link href="~/Content/thirdpart/style.css" media="all" rel="stylesheet" type="text/css" />
    @*<script src="http://code.jquery.com/jquery-1.10.2.min.js" type="text/javascript"></script>*@
    <script src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/bootstrap.min.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/raphael.min.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/jquery.mousewheel.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/jquery.vmap.min.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/jquery.vmap.sampledata.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/jquery.vmap.world.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/jquery.bootstrap.wizard.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/fullcalendar.min.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/gcal.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/jquery.dataTables.min.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/datatable-editable.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/jquery.easy-pie-chart.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/excanvas.min.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/jquery.isotope.min.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/masonry.min.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/modernizr.custom.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/jquery.fancybox.pack.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/select2.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/styleswitcher.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/wysiwyg.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/jquery.inputmask.min.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/jquery.validate.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/bootstrap-fileupload.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/bootstrap-datepicker.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/bootstrap-timepicker.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/bootstrap-colorpicker.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/bootstrap-switch.min.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/daterange-picker.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/date.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/morris.min.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/skycons.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/jquery.sparkline.min.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/fitvids.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/main.js" type="text/javascript"></script>
    <script src="~/Scripts/thirdpart/respond.js" type="text/javascript"></script>
    <script src="~/Scripts/data.js"></script>
    <script src="~/Scripts/jquery.city.select.min.js"></script>
    <script src="~/Scripts/prettify.js"></script>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">

    <style>
        div select {
            margin-top: 10px;
        }
        .clear{ clear:both} 
    </style>
    <script type="text/javascript">
        $(function () {
            $('#userProvince, #userCity').citylist({
                data: data,
                id: 'id',
                children: 'cities',
                name: 'name',
                metaTag: 'name'
            });

            $('#userProvince').prepend('<option value="" selected="selected">选择省</option>');
            $('#userCity').prepend('<option value="" selected="selected">选择城市</option>');

            $('input').attr('autocomplete','off');
        });

        function changeCheckCode() {
            $("#img").attr("src", $("#img").attr("src") + 1);  //id=2
        }

        //异步注册回调函数
        function afterRegist(data) {
            var serverData = data.split(':');
            if (serverData[0] == "ok") {
                window.top.location.href = "/U8System/Index";
                //先提示用户注册成功，几秒后使用注册信息登录到系统主界面

                //如果注册成功，异步登录（使用用户注册的帐户名和密码），进入主界面
                //$.ajax({
                //    type: 'post',
                //    url: "Login/UserLogin",
                //    data: { "LoginCode": serverData[1], "LoginPwd": serverData[2], "vCode_regist": Session["code_login"] },
                //    //登录回调函数
                //    success: function (data_regist) {
                //        var serverData_regist = data_regist.split(':');
                //        if (serverData_regist[0] == "ok") {
                //            window.location.href = "/Home/Index";
                //        }
                //        else {
                //            $("#errorMsg").text(serverData[1]);
                //        }
                //    },
                //    //发生错误回调函数
                //    error: function (data_regist) {
                //        $("#errorMsg").text(serverData[1]);
                //    }
                //})
                //window.location.href = "/Home/Index";
            } else if (serverData[0] == "no") {
                alert(serverData[2]);
                changeCheckCode();
            } else {
                alert("系统繁忙!!");
            }

        }
    </script>
</head>
<body class="login1 signup">
    <!-- Regist Screen -->
    <div class="login-wrapper">
        <div class="login-container" style="height:auto;margin-top:-400px;">
            <a href="index.html"><img width="100" height="50" src="~/image/logo-login@2x.png" /></a>
            @using (Ajax.BeginForm("Regist", "U8System", new { }, new AjaxOptions() { HttpMethod = "post", OnSuccess = "afterRegist" }, new { id = "registForm" }))
            {
                <div class="form-group">
                    <input class="form-control" type="email" placeholder="输入邮箱地址" name="userEmail" required>
                </div>
                <div class="form-group">
                    <input class="form-control" type="text" placeholder="输入姓名" name="userName" required>
                </div>
                <div class="form-group">
                    <input class="form-control" type="password" placeholder="输入密码" name="userPassword" required>
                </div>
                <div class="form-group">
                    <input class="form-control" type="password" placeholder="确认密码" name="userConfirmPassword" required>
                </div>
                <div class="form-group">
                    <select class="form-control" name="userGender" required>
                        <option value="">选择性别</option>
                        <option>男</option>
                        <option>女</option>
                    </select>
                </div>
                <div class="form-group">
                    <select class="form-control" name="userProvince" id="userProvince" style="width:50%;float:left;" required></select>
                    <select class="form-control" name="userCity" id="userCity" style="width:50%;float:left;"  required></select>
                    <div class="clear"></div>
                </div>
                <div class="form-group">
                    <input class="form-control" type="text" placeholder="输入联系电话" name="userPhone" required>
                </div>
                <div class="form-group">
                    <input class="form-control" type="text" placeholder="输入所属单位" name="userCompany" required>
                </div>
                <div class="form-group">
                    <input class="form-control" placeholder="输入验证码" type="text" name="vCode_Regist" required style="width:60%;float:left;">
                    <img id="img" src="/U8System/ShowRegistValidateCode/?id=1" style="width:20%;left:-25px;position:relative;" onclick="changeCheckCode();" />
                    <input type="submit" value="&#xf054;" style="width:10%;">
                </div>

                <div class="form-options">
                    <label class="checkbox"><input type="checkbox"><span>我已阅读并无条件接受 <a href="">《U8+开发交流平台使用协议》</a></span></label>
                </div>
            }
            <p class="signup">
                已经有U8开发者社区账户? <a href="/U8System/Index">立即登录</a>
            </p>
        </div>
    </div>
    <!-- End Regist Screen -->
</body>

</html>